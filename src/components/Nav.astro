---
---

<nav id="main-nav" class="fixed top-0 left-0 right-0 z-50 transition-all duration-300 translate-y-[-100%] opacity-0" aria-label="Hoofdnavigatie">
	<div class="max-w-7xl mx-auto px-6 lg:px-8 py-3 flex items-center justify-between">
		<a href="#hero" class="font-heading font-semibold text-lg text-[var(--color-brand-primary-text)] hover:text-[var(--color-brand-accent)] transition-colors duration-300">
			Crystal Helder
		</a>

		{/* Desktop links */}
		<div class="hidden sm:flex items-center gap-6 text-sm font-medium text-[var(--color-brand-muted)]">
			<a href="#aanpak" class="hover:text-[var(--color-brand-accent)] transition-colors duration-300">Aanpak</a>
			<a href="#traject" class="hover:text-[var(--color-brand-accent)] transition-colors duration-300">Over mij</a>
			<a href="#faq" class="hover:text-[var(--color-brand-accent)] transition-colors duration-300">FAQ</a>
			<a href="#kennismaking" class="inline-flex items-center px-5 py-2 rounded-full bg-[var(--color-brand-accent)] text-white text-sm font-medium hover:bg-[var(--color-brand-accent-hover)] transition-all duration-300 hover:-translate-y-0.5">
				Contact
			</a>
		</div>

		{/* Mobile hamburger button */}
		<button id="hamburger-btn" class="sm:hidden flex flex-col justify-center items-center w-10 h-10 gap-[5px]" aria-label="Menu openen" aria-expanded="false" aria-controls="mobile-menu">
			<span class="hamburger-line w-6 h-[2px] bg-[var(--color-brand-primary-text)] rounded-full transition-all duration-300 origin-center"></span>
			<span class="hamburger-line w-6 h-[2px] bg-[var(--color-brand-primary-text)] rounded-full transition-all duration-300 origin-center"></span>
			<span class="hamburger-line w-6 h-[2px] bg-[var(--color-brand-primary-text)] rounded-full transition-all duration-300 origin-center"></span>
		</button>
	</div>

	{/* Mobile menu overlay */}
	<div id="mobile-menu" class="sm:hidden fixed inset-0 top-[52px] bg-white/95 backdrop-blur-md flex flex-col items-center justify-center gap-8 text-lg font-medium text-[var(--color-brand-primary-text)] transition-all duration-300 opacity-0 pointer-events-none invisible">
		<a href="#aanpak" class="mobile-nav-link hover:text-[var(--color-brand-accent)] transition-colors duration-300">Aanpak</a>
		<a href="#traject" class="mobile-nav-link hover:text-[var(--color-brand-accent)] transition-colors duration-300">Over mij</a>
		<a href="#faq" class="mobile-nav-link hover:text-[var(--color-brand-accent)] transition-colors duration-300">FAQ</a>
		<a href="#kennismaking" class="mobile-nav-link inline-flex items-center px-8 py-3 rounded-full bg-[var(--color-brand-accent)] text-white font-medium hover:bg-[var(--color-brand-accent-hover)] transition-all duration-300 mt-4">
			Contact
		</a>
	</div>
</nav>

<style>
	/* Hamburger â†’ X animation */
	.menu-open .hamburger-line:nth-child(1) {
		transform: translateY(7px) rotate(45deg);
	}
	.menu-open .hamburger-line:nth-child(2) {
		opacity: 0;
	}
	.menu-open .hamburger-line:nth-child(3) {
		transform: translateY(-7px) rotate(-45deg);
	}
</style>

<script>
	function initNav() {
		const nav = document.getElementById('main-nav');
		const btn = document.getElementById('hamburger-btn');
		const menu = document.getElementById('mobile-menu');
		if (!nav || !btn || !menu) return;

		const hero = document.getElementById('hero');
		if (!hero) return;

		// Show/hide nav based on hero visibility
		const observer = new IntersectionObserver(
			([entry]) => {
				if (entry.isIntersecting) {
					nav.classList.add('translate-y-[-100%]', 'opacity-0');
					nav.classList.remove('translate-y-0', 'opacity-100', 'bg-white/80', 'backdrop-blur-md', 'shadow-sm');
					closeMenu();
				} else {
					nav.classList.remove('translate-y-[-100%]', 'opacity-0');
					nav.classList.add('translate-y-0', 'opacity-100', 'bg-white/80', 'backdrop-blur-md', 'shadow-sm');
				}
			},
			{ threshold: 0, rootMargin: '-80px 0px 0px 0px' }
		);
		observer.observe(hero);

		// Hamburger toggle
		function closeMenu() {
			btn.classList.remove('menu-open');
			btn.setAttribute('aria-expanded', 'false');
			btn.setAttribute('aria-label', 'Menu openen');
			menu.classList.add('opacity-0', 'pointer-events-none', 'invisible');
			menu.classList.remove('opacity-100', 'pointer-events-auto', 'visible');
			document.body.style.overflow = '';
		}

		function openMenu() {
			btn.classList.add('menu-open');
			btn.setAttribute('aria-expanded', 'true');
			btn.setAttribute('aria-label', 'Menu sluiten');
			menu.classList.remove('opacity-0', 'pointer-events-none', 'invisible');
			menu.classList.add('opacity-100', 'pointer-events-auto', 'visible');
			document.body.style.overflow = 'hidden';
		}

		btn.addEventListener('click', () => {
			const isOpen = btn.classList.contains('menu-open');
			isOpen ? closeMenu() : openMenu();
		});

		// Close menu when clicking a link
		menu.querySelectorAll('.mobile-nav-link').forEach(link => {
			link.addEventListener('click', closeMenu);
		});
	}

	initNav();
	document.addEventListener('astro:page-load', initNav);
</script>
